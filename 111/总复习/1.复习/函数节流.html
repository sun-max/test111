<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <!-- 函数节流：一个函数执行一次后，只有大于设定的执行周期才执行第二次，
    有个需要频繁触发的函数，出于性能优化角度，在规定时间内，只让函数
    触发第一次生效，后面不生效. -->
    <script>

        // function throttle(fn,dely){
        //   var startTime = 0;
        //   var nowTime = Date.now();
        //   if(nowTime-startTime > delay){
        //       fn();
        //       startTime = nowTime;//此时startTime的值无法保存在内存中。
        //   }
        // }

         //此时用闭包解决此问题  this指向的问题。
        function throttle(fn,delay){
          var startTime = 0;
          return function(){
            var nowTime = Date.now();
          if(nowTime-startTime > delay){
              fn.call(this);
              startTime = nowTime;//此时startTime的值无法保存在内存中。
          }
          }
          
        }
    document.onmousemove = throttle(function(){
        console.log(Date.now());
        // console.log(this);//此时this指向window
    },3000);
    </script>
</body>
</html>